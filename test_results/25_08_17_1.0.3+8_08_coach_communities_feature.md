**Date:** 2025‑08‑17 
**File:** 2025‑08‑17_1.0.03+8_08_coach_communities_feature.md
**Purpose:** Ensure coaches can create, manage, and moderate **Communities**, and that clients can view, post, react, and reply within those communities.

---

# Test Scenario – Community Creation & Engagement

## 0  Pre‑conditions
- Coach is signed‑in and on **My Courses → Community** tab  
- At least one client exists in the coach’s *Users* list  
- Stable internet connection  

---

## A  Enable Community Tab for Clients

1. **Toggle “Enable Community Tab for Clients”**  
   - Default state **OFF** (grey)  
   - Tap toggle → turns **ON** (colour)  
   - Success toast *“Community tab enabled for clients”*  
   - Switching **OFF** again hides Community tab for clients (verify with test client login)  

---

## B  Create New Community

1. **Tap “+ Create New Community”**  
   - *Create New Community* form opens  

2. **Banner Image** *(optional)*  
   - Tap “➕” icon → image picker  
   - Accepts .jpg / .png, Max 10 MB, Min 600 × 200 px  
   - Preview thumbnail appears after upload  

3. **Name***  
   - Required text field  
   - Validation: 3 – 60 characters; letters, numbers, spaces, punctuation `. , ? ! -`  
   - Error “Name is required (3‑60 chars)” if invalid  

4. **Description***  
   - Required multi‑line field  
   - Validation: 10 – 300 characters; plain text only (HTML stripped)  
   - Live counter bottom‑right (`0/300`)  

5. **Invite Members**  
   - Search bar shows existing users after typing ≥ 2 chars  
   - Tap user → chip appears in list  
   - Repeat to add multiple members  
   - **Invite** button sends in‑app notification  
   - Success toast *“Invitations sent”*  

6. **Save Community**  
   - **Save / Create** button enabled when Name & Description valid  
   - Tap → form closes, Community list refreshes  
   - New card shows:  
     - **Name:** <community name>  
     - **Description:** first 100 chars  
     - **Members:** *n* members (initially count of invited users)  

---

## C  Open & Post in Community

1. **Tap community card**  
   - Community page opens; title and description at top  
   - **Members** icon top‑right navigates to member list  

2. **Create a post**

| Field | Validation Rules | Expected |
|-------|------------------|----------|
| **Post textarea** | Required; 1 – 2 000 characters | “Post To Community” disabled until content present |
| **Add Image** *(optional)* | .jpg / .png, Max 10 MB | Thumbnail preview under textarea |
| **Post To Community** button | Enabled when textarea valid | New post appears under **Posts** section |

3. **Post display**  
   - Avatar, author name, timestamp  
   - Body text wraps correctly; image thumbnail if attached  
   - **Heart icon** (outline) with count (default 0)  
   - Comment bubble icon with count (default 0)  
   - **Delete** link visible to coach and post author  

---

## D  Post Reactions & Replies

1. **Like a post**  
   - Tap heart → icon fills colour, count +1  
   - Tap again → icon outline, count ‑1  

2. **Reply to a post**

| Action | Steps | Expected |
|--------|-------|----------|
| **Reply field** | Tap “Say your thing…” | Field expands; placeholder clears |
| Type reply | 1 – 1 000 chars | “Reply” button enabled |
| Send reply | Tap **Reply** | Comment appears indented under post, with own heart & delete |

3. **Delete post or comment**  
   - Tap **Delete** link → confirm dialog *“Delete this post?”* / *“Delete this comment?”*  
   - **Delete** removes item; counts update  

---

## E  Members Panel

1. **Tap “Members”** icon  
   - Modal shows list of avatars, names, joined date  
   - **Remove** button next to each (coach only) → confirm removal  
   - Removed user cannot access community (verify with client account)  

---

## F  Edit & Delete Community

1. **Return to Community list**  
   - Tap card menu (⋯) → **Edit / Delete** options  

2. **Edit**  
   - Opens same form pre‑filled; update fields; **Save** persists changes  

3. **Delete**  
   - Dialog *“Delete community and all posts?”*  
   - Checkbox *“I understand”* enables **Delete**  
   - Card disappears; clients lose access  

---

## 1  Expected Outcome
- Communities can be enabled/disabled globally by coaches  
- Creation validates all required fields and image specs  
- Members receive invitations and gain access  
- Posts support text, optional image, like/unlike, replies, and deletion  
- Member list reflects real‑time additions/removals  
- Editing or deleting a community updates visibility appropriately without residual data  

---

## Test Checklist

| Test | Pass |
|---|---|
| Coach is signed-in | ✅ |
| Coach is on **My Courses → Community** tab | ✅ |
| At least one client exists in Users list | ✅ |
| Internet connection is stable | ✅ |
| **Enable Community Tab for Clients** toggle visible | ✅ |
| Toggle default state = OFF (grey) | ✅ |
| Toggling ON changes colour | ✅ |
| Success toast “Community tab enabled for clients” appears | ❌ **Issue location:** Community settings. **Details:** Toggle changes state and functions correctly, but no success toast is displayed to confirm action. |
| Client account now shows Community tab | ✅ |
| Toggling OFF hides Community tab for client | ✅ |
| **+ Create New Community** button visible | ✅ |
| Tapping **+ Create New Community** opens form | ✅ |
| Banner Image upload “➕” icon visible | ✅ |
| Image picker accepts .jpg | ✅ |
| Image picker accepts .png | ✅ |
| Image picker rejects files > 10 MB | ❌ **Issue location:** Banner image upload. **Details:** Files larger than 10 MB are accepted without warning or prevention. |
| Image picker rejects resolution < 600×200 px | ❌ **Issue location:** Banner image upload. **Details:** Low-resolution images are accepted without validation. |
| Uploaded banner shows thumbnail preview | ✅ |
| **Name** field present | ✅ |
| Name required error when empty | ✅ |
| Name rejects < 3 characters | ❌ **Issue location:** Community creation form. **Details:** Accepts names shorter than 3 characters without triggering an error. |
| Name rejects > 60 characters | ❌ **Issue location:** Community creation form. **Details:** Allows more than 60 characters without warning. |
| Name accepts letters / numbers / spaces / . , ? ! - | ✅ |
| Name rejects other punctuation | ❌ **Issue location:** Community creation form. **Details:** Other punctuation (e.g., @, #, &) is accepted despite restriction. |
| **Description** field present | ✅ |
| Description required error when empty | ✅ |
| Description live counter shows `0/300` initially | ❌ **Issue location:** Description field. **Details:** No live counter is displayed to track characters. |
| Description rejects < 10 characters | ❌ **Issue location:** Description field validation. **Details:** Allows fewer than 10 characters without error. |
| Description rejects > 300 characters | ❌ **Issue location:** Description field validation. **Details:** Allows exceeding 300 characters without warning. |
| HTML tags stripped from Description | ❌ **Issue location:** Description sanitization. **Details:** HTML tags are not stripped; they are saved and rendered. |
| **Invite Members** search bar present | ❌ **Issue location:** Invite members section. **Details:** Search bar is missing entirely, preventing member search. |
| Search requires ≥ 2 characters to trigger | ❌ **Issue location:** Invite members section. **Details:** Not testable due to missing search bar. |
| Matching user list appears after search | ❌ **Issue location:** Invite members section. **Details:** Not testable due to missing search bar. |
| Selecting user adds chip with avatar | ✅ |
| Invite button disabled with 0 members (allowed but verify) | ❌ **Issue location:** Invite members section. **Details:** Function not testable due to missing search bar and invite workflow. |
| Tapping **Invite** shows toast “Invitations sent” | ✅ |
| **Save/Create** button disabled until Name & Description valid | ❌ **Issue location:** Create community form. **Details:** Save button is always active, even with invalid fields, leading to error after tap. |
| Tapping **Save** closes form | ✅ |
| Community list refreshes | ✅ |
| New community card appears | ✅ |
| Card shows name text | ✅ |
| Card shows first 100 chars of description | ❌ **Issue location:** Community card display. **Details:** Full description is shown without truncation to 100 characters. |
| Card shows Members count matches invited users | ✅ |
| Tapping community card opens Community page | ✅ |
| Community title visible at top | ✅ |
| Community description visible | ✅ |
| Members icon visible top-right | ✅ |
| Members icon navigates to member list modal | ✅ |
| Member list shows avatars and names | ✅ |
| Joined date is displayed for each member | ❌ **Issue location:** Member list modal. **Details:** Joined date is missing for all members. |
| Remove button visible to coach for each member | ✅ |
| Removing member shows confirmation dialog | ❌ **Issue location:** Member removal flow. **Details:** No confirmation dialog appears before removing member. |
| Confirming removal removes user from list | ❌ **Issue location:** Member removal flow. **Details:** Removal is instant without confirmation; user disappears from list. |
| Removed user cannot access community (client check) | ✅ |
| **Post textarea** placeholder visible | ✅ |
| Post button “Post To Community” disabled when textarea empty | ❌ **Issue location:** Post creation. **Details:** Button is always active, even when no content is entered, leading to error on miss. |
| Typing 1 char enables Post button | ✅ |
| Post rejects > 2 000 characters | ❌ **Issue location:** Post creation validation. **Details:** Allows more than 2 000 characters without warning. |
| Add Image icon visible under textarea | ✅ |
| Image attachment accepts .jpg | ✅ |
| Image attachment accepts .png | ✅ |
| Image attachment rejects > 10 MB | ❌ **Issue location:** Post image upload. **Details:** Files larger than 10 MB are accepted without validation. |
| Image thumbnail preview appears | ✅ |
| Tapping **Post To Community** creates post | ✅ |
| New post shows avatar | ✅ |
| Post shows author name | ✅ |
| Post shows timestamp | ✅ |
| Post body wraps correctly | ✅ |
| Image thumbnail displayed in post (if added) | ✅ |
| Heart icon outline appears with count 0 | ✅ |
| Comment bubble icon outline appears with count 0 | ✅ |
| Delete link visible to coach and author | ✅ |
| Tapping heart fills icon and increments count | ✅ |
| Tapping heart again unfills icon and decrements count | ✅ |
| Tapping “Say your thing…” expands reply field | ✅ |
| Reply button disabled when reply empty | ❌ **Issue location:** Reply creation. **Details:** Button is active even when reply is empty. |
| Reply rejects > 1 000 characters | ❌ **Issue location:** Reply validation. **Details:** Allows more than 1 000 characters without warning. |
| Tapping Reply posts comment | ✅ |
| Comment appears indented under post | ✅ |
| Comment shows own heart icon | ❌ **Issue location:** Comment display. **Details:** No heart icon appears on comments. |
| Comment shows Delete link to coach/author | ❌ **Issue location:** Comment deletion. **Details:** Comments cannot be deleted; no delete link is visible. |
| Deleting post shows “Delete this post?” dialog | ❌ **Issue location:** Post deletion. **Details:** Posts cannot be deleted; no delete option is available. |
| Confirming deletes post and updates counts | ❌ **Issue location:** Post deletion. **Details:** Not testable due to missing delete option. |
| Deleting comment shows “Delete this comment?” dialog | ❌ **Issue location:** Comment deletion. **Details:** Not testable; delete option missing for comments. |
| Confirming deletes comment and updates counts | ❌ **Issue location:** Comment deletion. **Details:** Not testable; delete option missing for comments. |
| Returning to Community list shows card menu ⋯ | ❌ **Issue location:** Community card menu. **Details:** No menu present on cards; edit/delete options inaccessible. |
| Tapping ⋯ shows Edit & Delete options | ❌ **Issue location:** Community card menu. **Details:** Missing menu prevents access to edit/delete actions. |
| Edit opens pre-filled community form | ❌ **Issue location:** Community editing. **Details:** Not testable; edit option missing. |
| Updating fields and saving persists changes | ❌ **Issue location:** Community editing. **Details:** Not testable; edit option missing. |
| Delete option opens “Delete community and all posts?” dialog | ❌ **Issue location:** Community deletion. **Details:** Not testable; delete option missing. |
| Checkbox “I understand” disabled Delete button | ❌ **Issue location:** Community deletion. **Details:** Not testable; delete option missing. |
| Checking box enables Delete button | ❌ **Issue location:** Community deletion. **Details:** Not testable; delete option missing. |
| Confirming delete removes community card | ❌ **Issue location:** Community deletion. **Details:** Not testable; delete option missing. |
| Clients lose access to deleted community (client check) | ❌ **Issue location:** Community deletion. **Details:** Not testable; delete option missing. |
| Community tab visibility updates without residual data | ✅ |