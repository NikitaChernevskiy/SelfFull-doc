SelfFull universal Mobile App Standards: AI Notes Capture, Auto‑Summary & Like‑Feedback Requirements  
v1.0 – 31 July 2025  

---

## Purpose  
AI Notes lets coaches and clients capture transcripts, session notes, and **AI‑generated Recaps** that summarise key insights.  
This document defines the functional, UX, performance, accessibility, analytics, and compliance standards for:

* Creating / editing notes and transcripts  
* Automatically generating Recaps via LLM  
* Capturing **Like** feedback on each Recap  
* Turning feedback into actionable telemetry for continuous model tuning  

By codifying these rules, Product, Design, Engineering, and QA share one measurable target—driving a friction‑free note‑taking flow while ensuring Recaps keep getting better.

---

## Note Creation & Editing Requirements (1 – 15)

1. **New Note CTA** — “+ New AI Note” button on top bar of **AI Notes** list; opens modal asking *Note Name* (≤ 60 chars).  
2. **Autoslug** — Note IDs autogenerated `NNNN‑###` for quick reference.  
3. **Empty state** — If 0 notes, show illustration + “Create your first AI Note”.  
4. **Add Transcript** — Accept plain text ≤ 15 000 chars or `.txt` upload ≤ 1 MB; word‑count indicator live.  
5. **Add Session Note** — Rich‑text area, Markdown allowed, 50–5 000 chars.  
6. **Add AI Instruction** — Optional prompt override (≤ 500 chars).  
8. **Draft autosave** — Every 10 s or on blur; unsaved dot ● in tab title.  
9. **Delete Note** — Trash icon prompts irreversible two‑step confirm.  
11. **Pagination** — Infinite scroll, 20 notes / page; spinner at bottom.  
12. **Concurrency lock** — If same note opened by two sessions, second loads read‑only.  
13. **Undo** — Delete snackbar with Undo 5 s.  
15. **Accessibility** — All form controls labelled; editor supports keyboard shortcuts.  

---

## Recap Auto‑Generation Requirements (16 – 30)

16. **Generate CTA** — “Generate Recap” button enabled when transcript OR session note ≥ 100 chars.  
17. **Prompt template** — System prompt *versioned*; pulls transcript + session note + instructions.  
18. **Token limit** — Max 4 000 input tokens; oldest transcript lines truncated first.  
19. **Streaming** — Recap bubble streams tokens live; skeleton loader visible first 500 ms.  
20. **Length bounds** — Recap 150–400 words; bulleted key points + action items section.  
21. **Latency** — First token ≤ 3 s; full recap ≤ 12 s (P95).  
22. **Retry** — On 5xx from LLM, retry up to 2× exponential back‑off.  
23. **Regeneration** — “Regenerate” button stored as new version `recapVersion++`.  
24. **Safety filter** — Recap passes moderation; if blocked, show red “Content removed” banner.  
25. **Badge** — “AI‑generated” badge top‑right of recap.  
26. **Markdown render** — Support headings, lists, bold, italics, links.  
27. **Auto‑tagging** — NLP extracts up to 5 topic tags; editable by user.  
29. **Rate limit** — 30 recaps / user / day.  
30. **Accessibility** — Recap renders in `aria‑live="polite"` region for screen readers.  

---

## Like Button Feedback Requirements (31 – 45)

31. **UI placement** — 👍 icon bottom‑right of each Recap bubble; 24 dp hitbox ≥ 48 dp.  
32. **Single click** — Tap toggles Like (filled 👍); tap again unlikes.  
33. **Count display** — Like count (anonymous aggregate) appears to the right of icon.  
34. **State persistence** — Like stored per `userId` + `recapVersion`; users can Like one version only.  
35. **Immediate feedback** — Optimistic UI updates count instantly; rolls back on error.  
36. **Animation** — 160 ms scale‑up “pop” on Like; accessibility pref *reduce‑motion* disables animation.  
37. **Rate limit** — 1 Like/unlike action per second per user.  
38. **Offline queue** — Like events queued offline; syncs when online.  
39. **Analytics** — Emit `recap_liked` (liked=true|false) with recapId, version, timestamp.  
40. **Data model** — Table `recap_feedback` (recapId PK, userId, liked, ts).  
41. **Privacy** — Like list not exposed; counts only.  
42. **Spam guard** — Rapid like/unlike toggling > 10 in 30 s suppressed after warning toast.  
44. **Tooltip** — On first hover/tap show tooltip “Mark helpful to improve future recaps”.  
45. **Accessibility** — `aria‑pressed` state toggles; label announces like state.  

---

## Analytics & Model‑Tuning Pipeline Requirements (46 – 55)

47. **ETL schedule** — Nightly job aggregates likes per recap prompt‑hash; output to `ai_feedback` table.  
48. **Model dashboard** — DataStudio board shows like‑rate %, average tokens, latency.  
49. **Threshold alert** — If like‑rate < 40 % on last 500 recaps, ping #ml‑alerts Slack.  
50. **Prompt experiment tag** — System prompt string SHA‑1 hashed; included in analytics for A/B comparison.  
51. **Training set** — Recaps with ≥ 5 Likes exported weekly to fine‑tune dataset bucket.  
52. **PII scrub** — ETL redacts emails/phones before export using regex.  
53. **Retention** — Raw recap + feedback kept 90 days; aggregates 2 years.  
54. **Governance** — Model‑tuning PRD must cite feedback metrics; Data Science lead sign‑off.  
55. **Privacy audit** — Quarterly review ensures feedback collection aligns with Privacy Policy.  

---

## Performance & Reliability Requirements (56 – 65)

56. **Memory** — Viewing 50 notes + one recap uses < 150 MB RAM on Pixel 5.  
57. **Frame rate** — Scrolling notes list ≥ 55 FPS; jank < 1 %.  
58. **Crash‑free** — < 0.3 % crash rate in AI Notes module.  
59. **Circuit breaker** — Three LLM 5xx errors trip breaker 2 min; UI shows “AI unavailable”.  
60. **Downtime fallback** — Users can still add manual notes if AI down.  
61. **ETag** — PUT note uses ETag to prevent overwrite; server returns 409 on conflict.  
62. **Bulk delete** — Deleting note deletes associated recaps & likes via cascade within 1 s.  
63. **Bulk export** — Coaches can export all notes (ZIP Markdown) ≤ 10 MB; ready within 30 s.  
64. **Observability** — Grafana dashboard tracks recap latency p95, like TPS.  
65. **Sentry** — Unhandled errors include breadcrumbs of last 5 note actions.  

---

## Security & Compliance Requirements (66 – 75)

66. **Auth** — All endpoints require JWT bearer; scopes `notes.read`, `notes.write`.  
67. **RBAC** — Client role can only access own notes; coach can access notes of own clients.  
68. **Encryption** — Notes stored AES‑256 at rest; TLS 1.3 in transit.  
69. **PII** — Note content may contain PII; only user and assigned coach can access.  
70. **GDPR delete** — On account deletion, notes & feedback purged within 30 days.  
71. **Audit log** — Create/edit/delete emits audit row with userId hash.  
72. **Rate limiting** — 60 note writes/min/user to prevent abuse.  
74. **Compliance tags** — Data classes labelled `Confidential – Client Data`.  
75. **Incident response** — P1 bug in notes module escalates to on‑call within 15 min.  