SelfFull universalâ€¯Mobileâ€¯App Standards: AIâ€¯Notes Capture, Autoâ€‘Summary & Likeâ€‘Feedback Requirements  
v1.0â€¯â€“â€¯31â€¯Julyâ€¯2025  

---

## Purpose  
AIâ€¯Notes lets coaches and clients capture transcripts, session notes, and **AIâ€‘generated Recaps** that summarise key insights.  
This document defines the functional, UX, performance, accessibility, analytics, and compliance standards for:

* Creating / editing notes and transcripts  
* Automatically generating Recaps via LLM  
* Capturing **Like** feedback on each Recap  
* Turning feedback into actionable telemetry for continuous model tuning  

By codifying these rules, Product, Design, Engineering, and QA share one measurable targetâ€”driving a frictionâ€‘free noteâ€‘taking flow while ensuring Recaps keep getting better.

---

## Note Creation & Editing RequirementsÂ (1â€¯â€“â€¯15)

1. **New Note CTA** â€” â€œ+â€¯NewÂ AIâ€¯Noteâ€ button on top bar of **AIâ€¯Notes** list; opens modal asking *NoteÂ Name* (â‰¤â€¯60â€¯chars).  
2. **Autoslug** â€” Note IDs autogenerated `NNNNâ€‘###` for quick reference.  
3. **Empty state** â€” If 0 notes, show illustration + â€œCreate your first AIÂ Noteâ€.  
4. **Add Transcript** â€” Accept plain text â‰¤â€¯15â€¯000â€¯chars or `.txt` upload â‰¤â€¯1â€¯MB; wordâ€‘count indicator live.  
5. **Add Session Note** â€” Richâ€‘text area, Markdown allowed, 50â€“5â€¯000â€¯chars.  
6. **Add AIÂ Instruction** â€” Optional prompt override (â‰¤â€¯500â€¯chars).  
8. **Draft autosave** â€” Every 10â€¯s or on blur; unsaved dot â— in tab title.  
9. **Delete Note** â€” Trash icon prompts irreversible twoâ€‘step confirm.  
11. **Pagination** â€” Infinite scroll, 20 notes / page; spinner at bottom.  
12. **Concurrency lock** â€” If same note opened by two sessions, second loads readâ€‘only.  
13. **Undo** â€” Delete snackbar with Undo 5â€¯s.  
15. **Accessibility** â€” All form controls labelled; editor supports keyboard shortcuts.  

---

## Recap Autoâ€‘Generation RequirementsÂ (16â€¯â€“â€¯30)

16. **Generate CTA** â€” â€œGenerateÂ Recapâ€ button enabled when transcript OR session note â‰¥â€¯100â€¯chars.  
17. **Prompt template** â€” System prompt *versioned*; pulls transcript + session note + instructions.  
18. **Token limit** â€” Max 4â€¯000 input tokens; oldest transcript lines truncated first.  
19. **Streaming** â€” Recap bubble streams tokens live; skeleton loader visible first 500â€¯ms.  
20. **Length bounds** â€” Recap 150â€“400â€¯words; bulleted key points + action items section.  
21. **Latency** â€” First token â‰¤â€¯3â€¯s; full recap â‰¤â€¯12â€¯s (P95).  
22. **Retry** â€” On 5xx from LLM, retry up to 2Ã— exponential backâ€‘off.  
23. **Regeneration** â€” â€œRegenerateâ€ button stored as new version `recapVersion++`.  
24. **Safety filter** â€” Recap passes moderation; if blocked, show red â€œContent removedâ€ banner.  
25. **Badge** â€” â€œAIâ€‘generatedâ€ badge topâ€‘right of recap.  
26. **Markdown render** â€” Support headings, lists, bold, italics, links.  
27. **Autoâ€‘tagging** â€” NLP extracts up to 5 topic tags; editable by user.  
29. **Rate limit** â€” 30 recaps / user / day.  
30. **Accessibility** â€” Recap renders in `ariaâ€‘live="polite"` region for screen readers.  

---

## Like Button Feedback RequirementsÂ (31â€¯â€“â€¯45)

31. **UI placement** â€” ğŸ‘ icon bottomâ€‘right of each Recap bubble; 24â€¯dp hitbox â‰¥â€¯48â€¯dp.  
32. **Single click** â€” Tap toggles Like (filled ğŸ‘); tap again unlikes.  
33. **Count display** â€” Like count (anonymous aggregate) appears to the right of icon.  
34. **State persistence** â€” Like stored per `userId` + `recapVersion`; users can Like one version only.  
35. **Immediate feedback** â€” Optimistic UI updates count instantly; rolls back on error.  
36. **Animation** â€” 160â€¯ms scaleâ€‘up â€œpopâ€ on Like; accessibility pref *reduceâ€‘motion* disables animation.  
37. **Rate limit** â€” 1 Like/unlike action per second per user.  
38. **Offline queue** â€” Like events queued offline; syncs when online.  
39. **Analytics** â€” Emit `recap_liked` (liked=true|false) with recapId, version, timestamp.  
40. **Data model** â€” Table `recap_feedback` (recapId PK, userId, liked, ts).  
41. **Privacy** â€” Like list not exposed; counts only.  
42. **Spam guard** â€” Rapid like/unlike toggling >â€¯10 in 30â€¯s suppressed after warning toast.  
44. **Tooltip** â€” On first hover/tap show tooltip â€œMark helpful to improve future recapsâ€.  
45. **Accessibility** â€” `ariaâ€‘pressed` state toggles; label announces like state.  

---

## Analytics & Modelâ€‘Tuning Pipeline RequirementsÂ (46â€¯â€“â€¯55)

47. **ETL schedule** â€” Nightly job aggregates likes per recap promptâ€‘hash; output to `ai_feedback` table.  
48. **Model dashboard** â€” DataStudio board shows likeâ€‘rate %, average tokens, latency.  
49. **Threshold alert** â€” If likeâ€‘rate <â€¯40â€¯% on last 500 recaps, ping #mlâ€‘alerts Slack.  
50. **Prompt experiment tag** â€” System prompt string SHAâ€‘1 hashed; included in analytics for A/B comparison.  
51. **Training set** â€” Recaps with â‰¥â€¯5 Likes exported weekly to fineâ€‘tune dataset bucket.  
52. **PII scrub** â€” ETL redacts emails/phones before export using regex.  
53. **Retention** â€” Raw recap + feedback kept 90â€¯days; aggregates 2Â years.  
54. **Governance** â€” Modelâ€‘tuning PRD must cite feedback metrics; Data Science lead signâ€‘off.  
55. **Privacy audit** â€” Quarterly review ensures feedback collection aligns with Privacy Policy.  

---

## Performance & Reliability RequirementsÂ (56â€¯â€“â€¯65)

56. **Memory** â€” Viewing 50 notes + one recap uses <â€¯150â€¯MB RAM on PixelÂ 5.  
57. **Frame rate** â€” Scrolling notes list â‰¥â€¯55â€¯FPS; jank <â€¯1â€¯%.  
58. **Crashâ€‘free** â€” <â€¯0.3â€¯% crash rate in AIâ€¯Notes module.  
59. **Circuit breaker** â€” Three LLM 5xx errors trip breaker 2â€¯min; UI shows â€œAI unavailableâ€.  
60. **Downtime fallback** â€” Users can still add manual notes if AI down.  
61. **ETag** â€” PUT note uses ETag to prevent overwrite; server returns 409 on conflict.  
62. **Bulk delete** â€” Deleting note deletes associated recaps & likes via cascade within 1â€¯s.  
63. **Bulk export** â€” Coaches can export all notes (ZIP Markdown) â‰¤â€¯10â€¯MB; ready within 30â€¯s.  
64. **Observability** â€” Grafana dashboard tracks recap latency p95, like TPS.  
65. **Sentry** â€” Unhandled errors include breadcrumbs of last 5 note actions.  

---

## Security & Compliance RequirementsÂ (66â€¯â€“â€¯75)

66. **Auth** â€” All endpoints require JWT bearer; scopes `notes.read`, `notes.write`.  
67. **RBAC** â€” Client role can only access own notes; coach can access notes of own clients.  
68. **Encryption** â€” Notes stored AESâ€‘256 at rest; TLS 1.3 in transit.  
69. **PII** â€” Note content may contain PII; only user and assigned coach can access.  
70. **GDPR delete** â€” On account deletion, notes & feedback purged within 30â€¯days.  
71. **Audit log** â€” Create/edit/delete emits audit row with userId hash.  
72. **Rate limiting** â€” 60 note writes/min/user to prevent abuse.  
74. **Compliance tags** â€” Data classes labelled `Confidentialâ€¯â€“â€¯Clientâ€¯Data`.  
75. **Incident response** â€” P1 bug in notes module escalates to onâ€‘call within 15â€¯min.  