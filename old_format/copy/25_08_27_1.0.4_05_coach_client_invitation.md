**Date:** 2025‑08‑27  
**File:** 25_08_27_1.0.4_05_coach_client_invitation.md
**Purpose:** Verify that a coach can invite a client by email, that the invitation is delivered with correct links, and that the client can create a standard (non‑coach) account and appear in the coach’s **Users** list.

---

# Test Scenario – Coach → Client Invitation Flow

## 0  Pre‑conditions
- Coach is signed‑in and on **Coach Dashboard**  
- At least one course exists (needed only if the coach plans to assign content)  
- Client’s email address is not yet registered in SelfFull  

---

## A  Coach Sends an Invitation

1. **Open “Invite”**  
   - Coach taps **Invite** button in the *Users* panel  
   - *Invite User* modal appears

2. **Fill in *Name***  
   - Required  
   - 2 – 50 characters  
   - Letters, spaces, hyphens only  

3. **Fill in *Email***  
   - Required  
   - Valid address format `local@domain.tld`  
   - 6 – 254 characters  

4. **Toggle “Want to assign any course”**  
   - Default **OFF**; when **ON**, dropdown shows all existing courses  
   - Coach may leave **OFF** to invite without course access  

5. **Tap “Invite”**  
   - Button disabled until Steps 2‑3 valid  
   - Success toast *“Invitation sent”*  
   - New user row appears in *Users* list with status **Pending**  

6. **Copy‑link panel**  
   - Modal displays auto‑generated email text with platform URLs (Web, Android, iOS)  
   - “Copy” icon copies full message to clipboard  

---

## B  Client Receives the Email

1. **Open email “Invitation from your coach”**  
   - Subject line correct  
   - Body contains the same text shown in copy‑link panel  
   - Three platform links open respective stores / web app without 404  

2. **Verify sender**  
   - “Notification from SelfFull” as the sender name  
   - Email address uses `@selffull.io` domain  

---

## C  Client Creates an Account

1. **Follow the Web link** (or install mobile app and open)  
   - Landing page shows **Sign In** / **Sign Up** choice  

2. **Tap “Sign Up”** – *Create Account* form appears  

3. **Complete the form**

| Field | Validation Rules | Expected After Input |
|-------|------------------|----------------------|
| **Name** | Required; 2 – 50 letters / spaces / hyphens | Green border (valid) |
| **Email** | Required; matches invited email; valid format; 6 – 254 chars | Green border |
| **Password** | Required; ≥ 8 chars, ≥ 1 uppercase, ≥ 1 number, ≥ 1 symbol | Strength bar ≥ “Medium” |
| **Confirm Password** | Required; must equal **Password** | No mismatch error message |
| **Create a Coach Account** toggle | Must remain **OFF** | Toggle colour stays grey |

4. **Tap “Create Account”**  
   - Button enabled only when all fields valid  
   - Account is created; client taken to *Data Privacy* page  

5. **Accept Data Privacy**  
   - “Accept” button enables checklist  
   - On acceptance, client sees welcome screen “Excited to Meet You!”  

6. **Tap “Next”**  
   - Onboarding message (if previously set up by coach)
   - Minimal profile prompt appears (photo optional, phone optional)  
   - Skip allowed; client lands on **Client Dashboard**  

---

## D  Post‑registration Checks

1. **Coach refreshes *Users* list**  
   - Client row status changes from **Pending** to **Active**  
   - If “assign any course” was toggled **ON**, *Courses* column shows “All”  
   - If a specific course was selected, course name is listed

2. **Client access**  
   - Client can open *My Courses* and sees any assigned course  
   - If no course assigned, page shows message “No courses yet – ask your coach”  

3. **Re‑invite safeguard**  
   - Coach attempts to invite same email again → error *“User already exists.”*  

---

## E  Coach Invite Code (Settings)

1. **Open Settings**
   - Coach opens the *Settings* page
   - Unique invite code is immediately visible (no extra steps)

2. **Share Code**
   - Coach copies code to clipboard using a visible “Copy” icon/button

3. **Client Joins with Code**
   - Client enters code during sign up to join as coach’s client

---

## Test Checklist

| Test | Pass |
|---|---|
| Coach is signed-in | ✅ |
| Coach is on **Coach Dashboard** | ✅ |
| “Invite” button visible in Users panel | ✅ |
| Tapping **Invite** opens *Invite User* modal | ✅ |
| *Name* input field present | ✅ |
| Name required error shown when empty | ✅ |
| Name rejects < 2 characters | ✅ |
| Name rejects > 50 characters | ✅ |
| Name accepts letters / spaces / hyphens | ✅ |
| Name rejects numbers / symbols | ✅ |
| *Email* input field present | ✅ |
| Email required error shown when empty | ✅ |
| Email rejects invalid format | ✅ |
| Email accepts valid `x@y.z` format | ✅ |
| Email rejects < 6 characters | ✅ |
| Email rejects > 254 characters | ✅ |
| “Want to assign any course” toggle present | ✅ |
| Toggle default state = OFF | ✅ |
| Toggling ON displays course dropdown | ✅ |
| Course dropdown lists existing courses | ✅ |
| Invite button disabled while form invalid | ✅ |
| Invite button enabled when Name & Email valid | ✅ |
| Tapping **Invite** shows toast “Invitation sent” | ✅ |
| New user row appears with status **Unactive** | ✅ |
| Copy-link panel displays invitation text | ✅ |
| Copy icon copies full message to clipboard | ✅ |
| **Email** with subject “Invitation from your coach” received | ✅ |
| Email sender name = “Notification from SelfFull” | ✅ |
| Sender email domain ends with `@selffull.io` | ✅ |
| Email body matches copy-link panel content | ✅ |
| Web link in email opens SelfFull web app (no 404) | ✅ |
| Android link opens Google Play listing (no 404) | ✅ |
| iOS link opens App Store listing (no 404) | ✅ |
| Following Web link shows Sign In / Sign Up page | ✅ |
| “Sign Up” button visible | ✅ |
| Tapping Sign Up opens Create Account form | ✅ |
| **Name** field present on Sign Up | ✅ |
| Name required error shown when empty | ✅ |
| Name rejects < 2 characters | ❌ **Issue location:** Client onboarding → Sign Up form → Name field. **Where:** Web/mobile Create Account form. **Details:** Allows single-character names without error; should enforce min length of 2 characters. |
| Name rejects > 50 characters | ❌ **Issue location:** Client onboarding → Sign Up form → Name field. **Where:** Web/mobile Create Account form. **Details:** No max length enforcement; accepts more than 50 characters. |
| Name accepts letters / spaces / hyphens | ✅ |
| **Email** field present on Sign Up | ✅ |
| Email auto-filled (optional) matches invited email | ❌ **Issue location:** Client onboarding → Sign Up form → Email field. **Where:** Web/mobile Create Account form. **Details:** Email is not prefilled from the invitation link; requires manual entry. |
| Email required error when empty | ✅ |
| Email rejects mismatched address | ✅ |
| Email accepts invited address format | ✅ |
| **Password** field present | ✅ |
| Password required error shown when empty | ✅ |
| Password rejects < 8 characters | ✅ |
| Password requires ≥ 1 uppercase letter | ✅ |
| Password requires ≥ 1 number | ✅ |
| Password requires ≥ 1 symbol | ✅ |
| **Confirm Password** field present | ✅ |
| Confirm Password mismatch error when not equal | ✅ |
| No error when passwords match | ✅ |
| “Create a Coach Account” toggle visible | ✅ |
| Coach toggle default OFF (grey) | ✅ |
| **Create Account** button disabled while form invalid | ✅ |
| Create Account button enabled when all fields valid | ✅ |
| Tapping Create Account registers client successfully | ✅ |
| Client redirected to Data Privacy page | ✅ |
| Data Privacy “Accept” button disabled until checkbox ticked | ✅ |
| Accepting privacy shows welcome “Excited to Meet You!” | ✅ |
| “Next” button on welcome screen visible | ✅ |
| Tapping Next shows minimal profile prompt | ✅ |
| Skip profile allowed | ✅ |
| Client lands on **Client Dashboard** | ✅ |
| Coach refreshes Users list | ✅ |
| Client row status changes to **Active** | ✅ |
| If “assign any course” OFF, Courses column blank | ✅ |
| If toggle ON with “All”, Courses column shows “All” | ✅ |
| If specific course chosen, course name displayed | ✅ |
| Client opens *My Courses* page | ✅ |
| Assigned course(s) visible to client (if any) | ✅ |
| If no course assigned, info message shown | ✅ |
| Coach attempts to invite same email again | ✅ |
| Error message “User already exists.” displayed | ✅ |
| Deleting user profile updates coach's chart | ❌ **Issue location:** Coach Dashboard → Users panel → Invite User modal. **Where:** Clients list. **Details:** Client record says Active even if the client requested account deletion |
| Invite code is visible in coach’s Settings page | ✅ |
| Client can join with code and appears in coach’s Users | ❌ **Issue location:** Coach Dashboard → Users panel → Invite User modal. **Where:** Clients list. **Details:** Client record does not appear if invited with code |